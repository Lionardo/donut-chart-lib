!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("d3"),require("@angular/core")):"function"==typeof define&&define.amd?define("donut-chart",["exports","d3","@angular/core"],e):e(t["donut-chart"]={},t.d3,t.ng.core)}(this,function(t,x,e){"use strict";var n=function(){function t(){}return t.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[]},t.ngInjectableDef=e.defineInjectable({factory:function(){return new t},token:t,providedIn:"root"}),t}(),r=function(){function t(){this.dataClickCallback=new e.EventEmitter,this.isready=!1}return t.prototype.ngOnInit=function(){},t.prototype.ngAfterViewInit=function(){this.isready=!0,this.containerId&&this.initChart()},t.prototype.ngOnDestroy=function(){x.select(window).on("resize."+this.containerId,null)},t.prototype.initChart=function(){var n=this;if(this.data.length!==this.color.length)return console.error("data array lenght is not the same as the color array lenght!"),!1;x.select("."+this.containerId).remove();var t=250,e=0,r=0,o=470,a=960-o-e,i=700-t-r,l=Math.min(a,i)/2,c=x.arc().innerRadius(.67*l).outerRadius(l-1),s=this.data,d=x.pie().padAngle(.015).value(function(t){return t.number}),u=x.select("#"+this.containerId).append("svg").attr("width",a+e+o).attr("height",i+t+r).attr("class",this.containerId).call(function y(e){var n=x.select(e.node().parentNode),t=parseInt(e.style("width"),10),r=parseInt(e.style("height"),10),o=t/r;function a(){var t=parseInt(n.style("width"),10);e.attr("width",t),e.attr("height",Math.round(t/o))}e.attr("viewBox","0 0 "+t+" "+r).attr("preserveAspectRatio","xMinYMid").call(a),x.select(window).on("resize."+n.attr("id"),a)}).append("g").attr("transform","translate("+o+", "+t+")"),p=this.color,h=this.prefixValue;function f(t,e){t.style("fill-opacity",e)}u.selectAll("path").data(d(s)).enter().append("path").attr("fill",function(t,e){return n.color[e]}).attr("d",c).style("cursor","pointer").on("click",function(t){n.callbackData=t.data,n.dataClickCallback.next(n.callbackData)}).on("mouseover",function(t,e,n){x.selectAll(n).filter(":not(:hover)").call(f,.4),x.select(this).style("stroke",p[e]),x.select(this.nextSibling).style("display","block");var r=t.data.name,o=t.data.number;u.select("text.text-tooltip").text(""+r),u.select("text.text-value-tooltip").text(h+" = "+o)}).on("mouseout",function(t,e,n){x.selectAll(n).call(f,1),x.selectAll(n).style("stroke","none"),x.selectAll(".histo-labels").style("display","none"),u.select("text.text-tooltip").text(""),u.select("text.text-value-tooltip").text("")}),u.append("text").attr("class","text-value-tooltip").attr("text-anchor","middle").style("font-size","2rem").style("color","black").attr("dy",""+.8*i).text(""),u.append("text").attr("class","text-tooltip").attr("text-anchor","middle").style("font-size","1.8rem").style("color","black").attr("dy",""+.88*i).text("")},t.decorators=[{type:e.Component,args:[{selector:"iazi-charts-donut",template:'<div [id]="containerId"></div>'}]}],t.ctorParameters=function(){return[]},t.propDecorators={containerId:[{type:e.Input}],data:[{type:e.Input}],prefixValue:[{type:e.Input}],color:[{type:e.Input}],dataClickCallback:[{type:e.Output}]},t}(),o=function(){function t(){}return t.decorators=[{type:e.NgModule,args:[{declarations:[r],imports:[],exports:[r]}]}],t}();t.DonutChartService=n,t.DonutChartComponent=r,t.DonutChartModule=o,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=donut-chart.umd.min.js.map